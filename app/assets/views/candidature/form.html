
<h1>
  Inscription
</h1>
<div >
  <form name="form" class="css-form" novalidate>

    <div class="control-group" ng-class="{error: myForm.name.$invalid}">

        <label>Nom / Name</label>
        <input type="text" ng-model="user.name" name="uName" required />
        <div ng-show="form.$submitted || form.uName.$touched">
          <span ng-show="form.uName.$error.required">Tell us your name.</span>
        </div>

        <label>Prénom / First Name</label>
        <input type="text" ng-model="user.firstname" name="uFirstName" required />
        <div ng-show="form.$submitted || form.uName.$touched">
          <span ng-show="form.uFirstName.$error.required">Tell us your first-name.</span>
        </div>

        <label>E-mail</label>
        <input type="email" ng-model="user.email" name="uEmail" required />
        <div ng-show="form.$submitted || form.uEmail.$touched">
          <span ng-show="form.uEmail.$error.required">Tell us your email.</span>
          <span ng-show="form.uEmail.$error.email">E-mail non valid / This is not a valid email.</span>
        </div>

        <label>Photo</label>
        <button type="file" ng-model="user.photo" name="uPhoto"
          ngf-select="upload(user.photo)"
          accept="image/*" ngf-max-size="10MB" required>
          Choisir une photo</button>
          <span ng-show="form.uPhoto.$valid">
            <span ng-show="upload_percentage < 0"> {{ upload_percentage }} </span>
            <span class="student-card" ng-show="form.uPhoto.$valid">
              <br>
              <img class="caption" ngf-thumbnail="user.photo || '/thumb.jpg'">
            </span>

        </span>
        <div ng-show="form.$submitted || form.uPhoto.$touched">
            <span ng-show="form.uPhoto.$error.required"> Give us a photo please</span>
            <span ng-show="form.uPhoto.$error.photo"> Value error </span>
        </div>



        <label>Genre</label>
        <select ng-model="user.gender" name="uGender" required>
          <option value="">---Choisir / Please select---</option> <!-- not selected / blank option -->
          <option value="M">Male</option>
          <option value="F">Female</option>
          <option value="T">Transgender</option>
          <option value="O">Other</option>
        </select>
        <div ng-show="form.$submitted || form.uGender.$touched">
          <span ng-show="form.uGender.$error.required">Tell us your gender.</span>
          <span ng-show="form.uGender.$error.gender"> Value error </span>
        </div>


        <label>Date de naissance / Birthdate</label>
        <input type="date" ng-model="user.birthdate" name="uBirthDate" required
             placeholder="{{birthdateMin | date:'dd-MM-yyyy'}}"
             min="{{birthdateMin | date:'yyyy-MM-dd'}}"
             max="{{birthdateMax | date:'yyyy-MM-dd'}}" />
        <div ng-show="form.$submitted || form.uBirthDate.$touched">
           <span ng-show="form.uBirthDate.$error.required">Tell us your Birthday.</span>
           <span ng-show="form.uBirthDate.$error.min"> Il faut avoir moins de 35 ans (être nés avant  le {{birthdateMax | date:'dd MMMM yyyy'}}) </span>
           <span ng-show="form.uBirthDate.$error.max"> Il faut être majeur (nés après le {{birthdateMax | date:'dd MMMM yyyy'}}) </span>
        </div>


        <label>Pays de naissance / Birth Place</label>
        <select ng-model="user.birthcountry" name="uBirthCountry" required>
          <option value="">-- Select a Country --</option>
          <option ng-repeat="(country,code) in countries" value="{{code}}">{{country}}</option>
        </select>

        <div ng-show="form.$submitted || form.uBirthCountry.$touched">
           <span ng-show="form.uBirthCountry.$error.required"> Tell us your Birth Place </span>
           <span ng-show="form.uBirthCountry.$error.birthcountry">This must be a country code!</span>
        </div>


        <label>Adresse du pays d'origine / Homeland Adresse</label>
        <input type="text"
    		   ng-places-autocomplete
    		   pa-options="paOptions"
    		   pa-on-place-ready="placesCallback"
    		   pa-trigger="paTrigger"
           name="uHomelandAdress"
           ng-model="user.homeland_adress"
  			/>
        <div ng-show="user.homeland_adress">
          <blockquote>
            <label> > Pays  / Homeland  Country</label>
            <select ng-model="user.homeland_country" name="uHomelandCountry">
              <option value="">-- Select a Country --</option>
              <option ng-repeat="(country,code) in countries" value="{{code}}">{{country}}</option>
            </select>

            <div ng-show="form.$submitted || form.uHomelandCountry.$touched">
               <span ng-show="form.uHomelandCountry.$error.homeland_country">This must be a country code!</span>
            </div>
          </blockquote>
        </div>


        <label>Adresse du pays de résidence / Residence Adresse</label>

        <input type="text"
    		   ng-places-autocomplete
    		   pa-options="paOptions"
    		   pa-on-place-ready="placesCallback"
    		   pa-trigger="paTrigger"
           name="uResidenceAdress"
           ng-model="user.residence_address"
  			/>
        <div ng-show="user.residence_address">
          <blockquote>
            <label> > Pays  / Residence  Country</label>
            <select ng-model="user.residence_country" name="uResidenceCountry">
              <option value="">-- Select a Country --</option>
              <option ng-repeat="(country,code) in countries" value="{{code}}">{{country}}</option>
            </select>

            <div ng-show="form.$submitted || form.uResidenceCountry.$touched">
               <span ng-show="form.uResidenceCountry.$error.residence_adress">This must be a country code!</span>
            </div>
          </blockquote>
        </div>


      <label>Numéro de téléphone pays d'origine   / Homeland Phone number</label>
      <input type="text" placeholder="+33-320283982" name="uHomelandPhone"
        ng-pattern="phone_pattern" ng-model="user.homeland_phone"
        ng-minlength="10" ng-maxlength="15"
      />
      <div ng-show="form.$submitted || form.uResidenceCountry.$touched">
        <span class="block" ng-show="form.uHomelandPhone.$error.required">Required!</span>
        <span class="block" ng-show="form.uHomelandPhone.$error.minlength">Phone no not less that 10 char.</span>
        <span class="block" ng-show="form.uHomelandPhone.$error.maxlength">Phone no not more than 11 char.</span>
        <span class="block" ng-show="form.uHomelandPhone.$error.pattern">Please match pattern [+33-123456789]</span>
      </div>



      <label>Numéro de téléphone Résidence / Residence Phone number</label>
      <input type="text" placeholder="+33-320283982" name="uResidencePhone"
        ng-pattern="phone_pattern" ng-model="user.residence_phone"
        ng-minlength="10" ng-maxlength="15"
      />
      <div ng-show="form.$submitted || form.uResidencePhone.$touched">
        <span class="block" ng-show="form.uResidencePhone.$error.required">Required!</span>
        <span class="block" ng-show="form.uResidencePhone.$error.minlength">Phone no not less that 10 char.</span>
        <span class="block" ng-show="form.uResidencePhone.$error.maxlength">Phone no not more than 11 char.</span>
        <span class="block" ng-show="form.uResidencePhone.$error.pattern">Please match pattern [+33-123456789]</span>
      </div>


      <label>Numéro de sécurité sociale / Insurance number</label>
      <input type="text" placeholder="+33-320283982" name="uInsuranceNumber" ng-model="user.insurance_number" required />
      <div ng-show="form.$submitted || form.uInsuranceNumber.$touched">
        <span class="block" ng-show="form.uInsuranceNumber.$error.required">Required!</span>
      </div>

      <label>Situation de famille / Family status</label>
      <select ng-model="user.family_status" name="uFamilyStatus" required>
        <option value="">---------</option>
        <option value="S" selected="selected">Single</option>
        <option value="E">Engaged</option>
        <option value="M">Married</option>
        <option value="D">Divorced</option>
        <option value="W">Widowed</option>
        <option value="C">Civil Union</option>
      </select>
      <div ng-show="form.$submitted || form.uFamilyStatus.$touched">
        <span ng-show="form.uFamilyStatus.$error.required">Tell us your Family status.</span>
        <span ng-show="form.uFamilyStatus.$error.gender"> Value error </span>
      </div>

      <label>Langue maternelle / Mother tongue</label>
      <select ng-model="user.mother_tongue" name="uMotherTongue" required>
        <option value="">-- Select a Language --</option>
        <option ng-repeat="(name, item) in LANGUAGES" value="{{name}}">{{item.englishName}} ({{name}})</option>
      </select>
      <div ng-show="form.$submitted || form.uMotherTongue.$touched">
        <span ng-show="form.uFamilyStatus.$error.required">Tell us your Mother language.</span>
        <span ng-show="form.uFamilyStatus.$error.gender"> Value error </span>
      </div>

      <label>Autres lmangues / Other tongue</label>
      <select ng-model="user.other_language" name="uOtherLanguage" multiple >
        <option ng-repeat="(name, item) in LANGUAGES" value="{{name}}">{{item.englishName}} ({{name}})</option>
      </select>

      <label>Cursus</label>
      <div>
        <div ng-repeat="(index,item) in cursus.items" ng-model="cursus.items" name="uCursus"  >
          <select ng-model="user.cursus[index].year"  >
          <option value="">-- Select a Year --</option>
          <option ng-repeat="year in years" value="{{year}}">{{year}}</option>
          <input type="text" placeholder="Diplome " ng-model="user.cursus[index].infos" required>
          <button type="file" ng-model="user.cursus[index].photo"
            ngf-select="upload(user.cursus[index].photo)"
            accept="image/*" ngf-max-size="10MB" required>
            justificatif</button>
            <span class="student-card" >
              <span ng-show="upload_percentage < 100 "> {{ upload_percentage }} </span>

                <img class="caption" ng-if="user.cursus[index].photo" ngf-thumbnail="user.cursus[index].photo">
            </span>

          </span>
          <div ng-show="form.$submitted || user.cursus[index].$touched">
              <span ng-show="user.cursus[index].$error.required"> Give us a photo please</span>
              <span ng-show="user.cursus[index].$error.photo"> Value error </span>
          </div>

          <button ng-click="removeCursus(index)"> - </button>
        </div>
      </div>
      <button ng-click="addCursus()"> + </button>




        <input type="submit" ng-click="update(user,form)" value="Save" />

    </div>
  </form>
  <div ng-show="form.$valid">
    <pre ng-repeat="(type,info) in infos">
      {{type}} = {{info | json}}
    </pre>

  </div>
</div>
